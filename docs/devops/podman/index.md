---
outline: deep
---

# 容器化技术快速入门

## 一、容器化技术概述

### 1.1、容器化技术概述

容器化技术是一种操作系统级别的虚拟化方法，它允许将应用程序及其依赖项（如运行时环境、系统工具、库等）打包成一个独立的、可移植的单元，这个单元就是容器。容器在运行时与宿主机共享操作系统内核，但又能在用户空间实现进程、网络、文件系统等资源的隔离，使得应用程序可以在不同的环境中以一致的方式运行。

容器化技术特点：轻量级、环境一致性、快速部署、可移植性强。

### 1.2、容器化技术与传统虚拟机的区别

1. 资源隔离与共享

   传统虚拟机：在硬件层面通过虚拟化技术（如 VMware、Hyper-V 等使用的技术）模拟出完整的硬件环境，每个虚拟机都有自己独立的操作系统内核，资源隔离是基于硬件级别的模拟实现的，不同虚拟机之间的资源完全独立，对硬件资源的消耗较大。

   容器：如前面所述，容器是基于操作系统内核的特性实现资源隔离，多个容器共享宿主机的内核，只是在用户空间进行隔离，在资源利用上更加高效，能在一台宿主机上运行更多的容器实例，但同时也因为共享内核，如果内核出现问题可能会影响所有容器。

2. 启动速度与资源占用

   传统虚拟机：启动时需要加载完整的操作系统内核、初始化各种系统服务等，启动过程耗时较长，并且由于每个虚拟机都包含完整的操作系统及应用，占用的磁盘空间和内存资源较多。

   容器：直接利用宿主机的内核，启动时只需加载容器自身的应用和配置，启动速度极快，而且镜像体积小，资源占用少，更适合在资源有限的环境下大规模部署应用。

3. 可移植性

   传统虚拟机：由于依赖特定的虚拟化平台和硬件环境，将虚拟机从一个平台迁移到另一个平台可能会遇到兼容性问题，需要进行复杂的配置和转换工作。

   容器：基于容器镜像的标准化格式，只要目标平台支持容器运行时，就能轻松迁移和部署，可移植性非常好。

### 1.3、容器化技术工具

容器化技术工具有很多种，其中 Docker 是最主流的容器化技术，像其他的还有 Kubernetes、Podman 等。

## 二、Podman介绍

在容器化技术中，选择 Podman 而不选择 Docker 的原因有以下几点：

| 问题概述                           | 原因                                                         |
| ---------------------------------- | ------------------------------------------------------------ |
| Docker Daemon 问题严重             | Docker 依赖一个长期运行的单一进程（Docker Daemon）意味着单点故障、以root权限运行，潜在安全风险高、调试 Daemon 极为困难，进程一旦问题就安全瘫痪。相比之下，其他方案如 containerd 和 CRI-O 并不需要这样一个中心化的守护进程，速度更快，权限更低。 |
| Docker Desktop 收费问题            | Docker 在企业环境对 Docker Desktop 开始收费，                |
| Kubernetes 已放弃 Docker           | Kubernetes 并未放弃容器技术，而是放弃了 Docker 作为运行时。Kubernetes 主推的是支持 CRI 接口的原生容器运行时，如 containerd 和 CRI-O。 |
| Podman 已经优于 Docker（多数场景） | Podman 几乎能无缝替代 Docker，并且更优秀。像 无 Daemon 进程、可非 root 用户运行、Docker 命令完全兼容 |
| Docker 限制访问                    | Docker 限制国内拉取镜像                                      |

Podman 是一个开源容器、Pod 和容器镜像管理引擎。Podman 可以轻松查找、运行、构建和共享容器。

Podman 官方文档参考：https://docs.podman.io/en/latest/Tutorials.html

## 二、Podman安装

首先需要准备 Ubuntu 22.04 LTS 一台服务器，在该服务器上进行安装。

更多详细安装过程参考官网介绍：https://podman.io/docs/installation#installing-on-linux

执行以下命令对 Podman 进行安装

```bash
sudo apt-get update
sudo apt-get -y install podman
```

查看是否安装成功

```bash
podman --version
```

运行显示 podman 版本说明已经安装成功

![image-20250901132559815](images/image-20250901132559815.png)

注意：Podman 默认无守护进程的模式运行。这与 Docker 不同，Docker 有一个常驻后台的 dockerd 服务。因此，Podman 本身并没有一个 “运行状态” 需要像系统服务那样去查看（如 active 或 inactive）

## 三、容器化基本概念

### 3.1、镜像

镜像就是一个只读的模板。Docker 提供了一个很简单的机制来创建镜像或者更新现有的镜像，用户甚至可以直接从其他人那里下载一个已经做好的镜像来直接使用。 

### 3.2、容器

Docker 利用容器来运行应用， 容器是从镜像创建的运行实例。它可以被启动、开始、停止、删除。每个容器都是相互隔离的、保证安全的平台。 

### 3.3、仓库

仓库是集中存放镜像文件的场所。有时候会把仓库和仓库注册服务器（Registry）混为一谈，并不严格区分。实际上，仓库注册服务器上往往存放着多个仓库，每个仓库中又包含了多个镜像，每个镜像有不同的标签（tag）。 

仓库分为公开仓库（Public）和私有仓库（Private）两种形式。 

最大的公开仓库是 [Docker Hub](https://hub.docker.com/)，存放了数量庞大的镜像供用户下载。 国内的公开仓库包括 [Docker Pool](https://promotion.aliyun.com/ntms/act/kubernetes.html) 等，可以提供大陆用户更稳定快速的访问。 

用户也可以在本地网络内创建一个私有仓库， 当用户创建了自己的镜像之后就可以使用 `push` 命令将它上传到公有或者私有仓库，这样下次在另外一台机器上使用这个镜像时候，只需要从仓库上 `pull` 下来就可以了。 

## 四、Docker的生命周期详解

